{% extends "layouts/base.html" %}

{% set active_tab = "data" %}
{% block title %}Data Browser - Strategy Lab{% endblock %}

{% block main_class %}flex h-[calc(100vh-3.5rem)]{% endblock %}

{% block content %}
<!-- Sidebar -->
<aside class="w-72 flex-shrink-0 bg-gray-800 border-r border-gray-700 flex flex-col overflow-hidden">
    <div class="px-4 py-3 border-b border-gray-700 flex-shrink-0">
        <span class="text-sm font-semibold text-gray-300 uppercase tracking-wide">Data Browser</span>
    </div>
    <div class="flex-1 overflow-y-auto p-3" id="data-tree"
         hx-get="/data/tree" hx-trigger="load" hx-swap="innerHTML" hx-boost="false"
         hx-indicator="#preview-loading">
        <div class="text-gray-500 text-sm px-2">Loading...</div>
    </div>
</aside>

<!-- Main: Data Preview -->
<div class="flex-1 overflow-y-auto p-6">
    <div id="data-preview" class="max-w-6xl mx-auto" hx-on::after-swap="initDataCharts()">
        <div class="text-center text-gray-500 py-20">
            <div class="text-4xl mb-3">ðŸ“Š</div>
            <p>Select a dataset from the tree to preview</p>
        </div>
    </div>
    <div id="preview-loading" class="htmx-indicator text-center py-20">
        <div class="inline-block animate-spin rounded-full h-8 w-8 border-2 border-gray-600 border-t-blue-400"></div>
        <p class="text-gray-500 text-sm mt-3">Loading data...</p>
    </div>
</div>
{% endblock %}
